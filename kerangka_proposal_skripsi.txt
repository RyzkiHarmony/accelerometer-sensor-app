Kerangka Program Sistem Deteksi Kerusakan Jalan
Berdasarkan proposal skripsi Anda, berikut kerangka program yang komprehensif untuk sistem deteksi kerusakan jalan berbasis crowdsourcing:
1. Aplikasi Android (Kotlin)
1.1 Modul Sensor & Perekaman
- SensorManager
  - AccelerometerHandler (perekaman 3-axis)
  - GPSHandler (koordinat & timestamp)
  - DataSynchronizer (sinkronisasi sensor)

- RecordingService
  - startRecording()
  - stopRecording()
  - pauseRecording()
  - saveToLocal()
1.2 Modul Penyimpanan Lokal
- LocalDatabase (Room/SQLite)
  - TripEntity (id, timestamp, status)
  - SensorDataEntity (trip_id, sensor_data, location)
  
- FileManager
  - exportToCSV()
  - validateData()
  - compressData()
1.3 Modul Upload & Sinkronisasi
- NetworkManager
  - uploadTrip()
  - checkConnection()
  - retryMechanism()
  
- ApiService (Retrofit)
  - POST /api/trips/upload
  - GET /api/trips/status
1.4 Modul UI
- MainActivity
  - RecordingFragment
  - TripListFragment
  - MapVisualizationFragment
  - SettingsFragment
  
- ViewModels (MVVM)
  - RecordingViewModel
  - TripViewModel

2. Backend Server (Django + Python)
2.1 Modul API & Ingest
python# api/views.py
- TripUploadView
  - validate_data()
  - save_raw_data()
  - trigger_processing()
  
- TripStatusView
- SegmentDataView
- PriorityListView
2.2 Modul Preprocessing
python# processing/preprocessing.py
- DataValidator
  - check_completeness()
  - check_time_consistency()
  
- SignalProcessor
  - normalize_orientation()  # RMS-based
  - apply_filter()  # Low-pass/bandpass
  - align_gps_accelerometer()
  
- WindowGenerator
  - sliding_window()
  - extract_location_per_window()
2.3 Modul Feature Extraction
python# processing/features.py
- FeatureExtractor
  - extract_peak_amplitude()
  - extract_rms()
  - extract_variance()
  - extract_jerk()
  - extract_peak_count()
  - extract_inter_peak_interval()
  - extract_band_energy()
  
  - extract_all_features()  # menggabungkan semua
2.4 Modul Deteksi (Random Forest)
python# ml/detection.py
- PreFilter
  - apply_threshold_rules()
  
- RandomForestDetector
  - load_model()
  - predict_window()
  - predict_batch()
  
- ModelTrainer
  - train_model()
  - evaluate_model()
  - save_model()
2.5 Modul Agregasi Segmen
python# processing/aggregation.py
- EventMapper
  - map_event_to_segment()  # PostGIS spatial ops
  
- SpatioTemporalDeduplicator
  - deduplicate_events()
  
- SegmentAggregator
  - calculate_event_rate()
  - calculate_normalized_severity()
  - update_segment_indicators()
  
- PriorityCalculator
  - calculate_priority_score()
  - rank_segments()
2.6 Modul Database
python# models.py (Django ORM)
- Trip
  - id, user_id, start_time, end_time, status
  
- SensorData
  - trip_id, timestamp, acc_x, acc_y, acc_z, 
    latitude, longitude
  
- DetectedEvent
  - id, trip_id, timestamp, location (Point),
    severity, features (JSON)
  
- RoadSegment (PostGIS)
  - segment_id, geometry (LineString), 
    district, road_name
  
- SegmentIndicator
  - segment_id, event_count, trip_count,
    event_rate, avg_severity, priority_score,
    last_updated

3. Dashboard Web (React.js)
3.1 Modul Autentikasi
javascript// components/Auth
- Login.jsx
- ProtectedRoute.jsx
- AuthContext.js
3.2 Modul Peta
javascript// components/Map
- MapContainer.jsx
  - Leaflet/Mapbox integration
  
- SegmentLayer.jsx
  - renderSegments()
  - colorByPriority()
  
- EventMarkers.jsx
- MapControls.jsx
3.3 Modul Filter & Pencarian
javascript// components/Filters
- DistrictFilter.jsx
- PriorityRangeFilter.jsx
- DateRangeFilter.jsx
- SearchBar.jsx
3.4 Modul Detail & Visualisasi
javascript// components/Dashboard
- SegmentDetailPanel.jsx
  - showIndicators()
  - showEventHistory()
  
- PriorityList.jsx
  - sortedSegmentTable()
  
- StatisticsSummary.jsx
  - totalSegments()
  - totalDamaged()
  - coverage()
3.5 API Integration
javascript// services/api.js
- fetchSegments()
- fetchSegmentDetail()
- fetchPriorityList()
- fetchStatistics()

4. Database Schema (PostgreSQL + PostGIS)
sql-- Tabel utama
CREATE TABLE trips (
    id SERIAL PRIMARY KEY,
    user_id VARCHAR(100),
    start_time TIMESTAMP,
    end_time TIMESTAMP,
    status VARCHAR(20),
    created_at TIMESTAMP DEFAULT NOW()
);

CREATE TABLE sensor_data (
    id SERIAL PRIMARY KEY,
    trip_id INTEGER REFERENCES trips(id),
    timestamp TIMESTAMP,
    acc_x FLOAT,
    acc_y FLOAT,
    acc_z FLOAT,
    latitude DOUBLE PRECISION,
    longitude DOUBLE PRECISION
);

CREATE TABLE detected_events (
    id SERIAL PRIMARY KEY,
    trip_id INTEGER REFERENCES trips(id),
    timestamp TIMESTAMP,
    location GEOMETRY(Point, 4326),
    severity FLOAT,
    rms_value FLOAT,
    features JSONB,
    created_at TIMESTAMP DEFAULT NOW()
);

CREATE TABLE road_segments (
    segment_id VARCHAR(50) PRIMARY KEY,
    geometry GEOMETRY(LineString, 4326),
    district VARCHAR(100),
    road_name VARCHAR(200)
);

CREATE TABLE segment_indicators (
    id SERIAL PRIMARY KEY,
    segment_id VARCHAR(50) REFERENCES road_segments(segment_id),
    event_count INTEGER DEFAULT 0,
    trip_count INTEGER DEFAULT 0,
    event_rate FLOAT,
    avg_severity FLOAT,
    normalized_event_rate FLOAT,
    normalized_severity FLOAT,
    priority_score FLOAT,
    last_updated TIMESTAMP DEFAULT NOW()
);

-- Index untuk performa
CREATE INDEX idx_events_location ON detected_events USING GIST(location);
CREATE INDEX idx_segments_geometry ON road_segments USING GIST(geometry);
CREATE INDEX idx_events_timestamp ON detected_events(timestamp);
```

---

## 5. Pipeline Pemrosesan (Flow)
```
1. Android App → Record Trip
   ↓
2. Upload CSV → Backend API
   ↓
3. Validation & Storage → PostgreSQL
   ↓
4. Preprocessing
   - Filtering
   - Normalization
   - Window Generation
   ↓
5. Feature Extraction
   - Peak, RMS, Variance, Jerk, dll.
   ↓
6. Prefilter (Rule-based)
   ↓
7. Detection (Random Forest)
   ↓
8. Event Mapping → Segment
   ↓
9. Deduplication
   ↓
10. Aggregation
    - Event Rate
    - Severity
    ↓
11. Priority Score Calculation
    ↓
12. Dashboard Visualization

6. Modul Testing
6.1 Black Box Testing
python# tests/test_android.py (manual testing checklist)
# tests/test_dashboard.py (manual testing checklist)
6.2 Unit Testing
python# tests/unit/
- test_preprocessing.py
- test_feature_extraction.py
- test_detection.py
- test_aggregation.py
6.3 Integration Testing
python# tests/integration/
- test_api_endpoints.py
- test_data_pipeline.py
```

### 6.4 UAT
```
- Kuesioner Skala Likert
- User Testing Session
```

---

## 7. Deployment & DevOps
```
- Docker containers
  - Backend (Django)
  - Database (PostgreSQL + PostGIS)
  - Web (React - Nginx)
  
- CI/CD Pipeline
  - GitHub Actions / GitLab CI
  
- Monitoring
  - Logging (sentry/elk)
  - Performance monitoring
```

---

## 8. Dokumentasi
```
- README.md
- API Documentation (Swagger/OpenAPI)
- User Manual (Android App)
- Admin Manual (Dashboard)
- Developer Guide
- Laporan Tugas Akhir

Kerangka program ini mencakup semua komponen yang disebutkan dalam proposal Anda dengan struktur modular yang jelas. Setiap modul dirancang untuk dapat dikembangkan dan diuji secara independen sambil tetap terintegrasi dalam sistem end-to-end.